<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تست اپلیکیشن - ردیاب تمرینات باشگاه</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .pass { background: #d4edda; color: #155724; }
        .fail { background: #f8d7da; color: #721c24; }
        .test-button {
            background: #007BFF;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>تست اپلیکیشن ردیاب تمرینات باشگاه</h1>
        <p>این صفحه برای تست عملکرد اپلیکیشن طراحی شده است.</p>
        
        <h2>تست‌های موجود:</h2>
        
        <div>
            <button class="test-button" onclick="testLocalStorage()">تست LocalStorage</button>
            <button class="test-button" onclick="testLocalStorageReadWrite()">تست خواندن/نوشتن</button>
            <button class="test-button" onclick="testLocalStorageClear()">تست پاک کردن</button>
        </div>
        
        <h2>نتایج تست:</h2>
        <div id="test-results"></div>
        
        <h2>ورود تست:</h2>
        <button class="test-button" onclick="addTestData()">اضافه کردن داده تست</button>
        <button class="test-button" onclick="clearTestData()">پاک کردن داده تست</button>
        <button class="test-button" onclick="viewTestData()">مشاهده داده تست</button>
        
        <h2>وضعیت اپلیکیشن:</h2>
        <div id="app-status"></div>
        
        <div style="margin-top: 30px;">
            <a href="index.html" style="background: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">بازگشت به اپلیکیشن اصلی</a>
        </div>
    </div>

    <script>
        function addResult(message, isPass = true) {
            const resultDiv = document.getElementById('test-results');
            const resultClass = isPass ? 'pass' : 'fail';
            resultDiv.innerHTML += `<div class="test-result ${resultClass}">${message}</div>`;
        }

        function testLocalStorage() {
            try {
                // تست پشتیبانی از localStorage
                if (typeof(Storage) !== "undefined") {
                    addResult("✅ مرورگر از localStorage پشتیبانی می‌کند");
                    
                    // تست نوشتن
                    localStorage.setItem("test", "Hello World");
                    addResult("✅ نوشتن در localStorage موفق");
                    
                    // تست خواندن
                    const value = localStorage.getItem("test");
                    if (value === "Hello World") {
                        addResult("✅ خواندن از localStorage موفق");
                    } else {
                        addResult("❌ خواندن از localStorage ناموفق");
                    }
                    
                    // تست پاک کردن
                    localStorage.removeItem("test");
                    if (!localStorage.getItem("test")) {
                        addResult("✅ پاک کردن localStorage موفق");
                    } else {
                        addResult("❌ پاک کردن localStorage ناموفق");
                    }
                } else {
                    addResult("❌ مرورگر از localStorage پشتیبانی نمی‌کند", false);
                }
            } catch (error) {
                addResult(`❌ خطا در تست localStorage: ${error.message}`, false);
            }
        }

        function testLocalStorageReadWrite() {
            try {
                const testData = {
                    id: Date.now(),
                    name: "تست تمرین",
                    weight: 70,
                    sets: 3,
                    reps: 10,
                    date: new Date().toISOString().split('T')[0],
                    time: new Date().toTimeString().slice(0, 5)
                };
                
                // تست ذخیره آرایه
                let exercises = JSON.parse(localStorage.getItem('gym-exercises') || '[]');
                exercises.push(testData);
                localStorage.setItem('gym-exercises', JSON.stringify(exercises));
                
                // تست خواندن آرایه
                const savedExercises = JSON.parse(localStorage.getItem('gym-exercises') || '[]');
                if (savedExercises.length > 0 && savedExercises[0].name === "تست تمرین") {
                    addResult("✅ ذخیره و خواندن آرایه تمرینات موفق");
                } else {
                    addResult("❌ ذخیره و خواندن آرایه تمرینات ناموفق", false);
                }
            } catch (error) {
                addResult(`❌ خطا در تست read/write: ${error.message}`, false);
            }
        }

        function testLocalStorageClear() {
            try {
                const testKey = "test-clear";
                localStorage.setItem(testKey, "test");
                localStorage.removeItem(testKey);
                
                if (!localStorage.getItem(testKey)) {
                    addResult("✅ پاک کردن آیتم تست موفق");
                } else {
                    addResult("❌ پاک کردن آیتم تست ناموفق", false);
                }
            } catch (error) {
                addResult(`❌ خطا در تست پاک کردن: ${error.message}`, false);
            }
        }

        function addTestData() {
            try {
                const exercises = JSON.parse(localStorage.getItem('gym-exercises') || '[]');
                const testExercises = [
                    {
                        id: 1,
                        name: "پرس سینه",
                        weight: 80,
                        sets: 3,
                        reps: 10,
                        date: new Date().toISOString().split('T')[0],
                        time: "09:00",
                        notes: "تمرین تست"
                    },
                    {
                        id: 2,
                        name: "اسکوات",
                        weight: 100,
                        sets: 3,
                        reps: 8,
                        date: new Date().toISOString().split('T')[0],
                        time: "10:00",
                        notes: "تمرین تست"
                    }
                ];
                
                localStorage.setItem('gym-exercises', JSON.stringify(testExercises));
                addResult("✅ داده‌های تست اضافه شدند");
            } catch (error) {
                addResult(`❌ خطا در اضافه کردن داده تست: ${error.message}`, false);
            }
        }

        function clearTestData() {
            try {
                localStorage.removeItem('gym-exercises');
                addResult("✅ داده‌های تست پاک شدند");
            } catch (error) {
                addResult(`❌ خطا در پاک کردن داده تست: ${error.message}`, false);
            }
        }

        function viewTestData() {
            try {
                const exercises = JSON.parse(localStorage.getItem('gym-exercises') || '[]');
                document.getElementById('app-status').innerHTML = `
                    <p>تعداد تمرینات ذخیره شده: ${exercises.length}</p>
                    ${exercises.length > 0 ? '<pre>' + JSON.stringify(exercises, null, 2) + '</pre>' : '<p>هیچ داده‌ای ذخیره نشده</p>'}
                `;
                addResult("✅ داده‌های تست نمایش داده شدند");
            } catch (error) {
                addResult(`❌ خطا در نمایش داده تست: ${error.message}`, false);
            }
        }

        function checkAppStatus() {
            const statusDiv = document.getElementById('app-status');
            statusDiv.innerHTML = `
                <p><strong>وضعیت مرورگر:</strong></p>
                <p>LocalStorage: ${typeof(Storage) !== "undefined" ? 'پشتیبانی می‌شود' : 'پشتیبانی نمی‌شود'}</p>
                <p>JavaScript: فعال</p>
                <p>تاریخ: ${new Date().toLocaleDateString('fa-IR')}</p>
            `;
        }

        // اجرای بررسی وضعیت در بارگذاری صفحه
        window.onload = checkAppStatus;
    </script>
</body>
</html>